function cov_2617da4yij(){var path="/Users/jackylai/Desktop/fwp_a2/express/testing/test.database/index.js";var hash="e751b002f3d16ae38a3eca31933dc50ed2c4b375";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/jackylai/Desktop/fwp_a2/express/testing/test.database/index.js",statementMap:{"0":{start:{line:2,column:33},end:{line:2,column:53}},"1":{start:{line:3,column:15},end:{line:3,column:37}},"2":{start:{line:5,column:11},end:{line:7,column:1}},"3":{start:{line:10,column:0},end:{line:13,column:3}},"4":{start:{line:16,column:0},end:{line:16,column:63}},"5":{start:{line:17,column:0},end:{line:17,column:63}},"6":{start:{line:18,column:0},end:{line:18,column:69}},"7":{start:{line:21,column:0},end:{line:21,column:82}},"8":{start:{line:22,column:0},end:{line:22,column:86}},"9":{start:{line:23,column:0},end:{line:23,column:87}},"10":{start:{line:25,column:0},end:{line:30,column:2}},"11":{start:{line:27,column:4},end:{line:27,column:30}},"12":{start:{line:29,column:4},end:{line:29,column:21}},"13":{start:{line:33,column:18},end:{line:33,column:39}},"14":{start:{line:34,column:4},end:{line:34,column:26}},"15":{start:{line:34,column:19},end:{line:34,column:26}},"16":{start:{line:36,column:19},end:{line:36,column:36}},"17":{start:{line:38,column:25},end:{line:38,column:86}},"18":{start:{line:39,column:4},end:{line:44,column:6}},"19":{start:{line:45,column:4},end:{line:45,column:83}},"20":{start:{line:46,column:4},end:{line:51,column:6}},"21":{start:{line:54,column:0},end:{line:54,column:20}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:25,column:10},end:{line:25,column:11}},loc:{start:{line:25,column:22},end:{line:30,column:1}},line:25},"1":{name:"seedData",decl:{start:{line:32,column:15},end:{line:32,column:23}},loc:{start:{line:32,column:26},end:{line:52,column:1}},line:32}},branchMap:{"0":{loc:{start:{line:34,column:4},end:{line:34,column:26}},type:"if",locations:[{start:{line:34,column:4},end:{line:34,column:26}},{start:{line:34,column:4},end:{line:34,column:26}}],line:34}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},f:{"0":0,"1":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e751b002f3d16ae38a3eca31933dc50ed2c4b375"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2617da4yij=function(){return actualCoverage;};}return actualCoverage;}cov_2617da4yij();// Imports
const{Sequelize,DataTypes}=(cov_2617da4yij().s[0]++,require("sequelize"));const config=(cov_2617da4yij().s[1]++,require("./config.js"));const db=(cov_2617da4yij().s[2]++,{Op:Sequelize.Op});// Create a Sequelize instance
cov_2617da4yij().s[3]++;db.sequelize=new Sequelize(config.DB,config.USER,config.PASSWORD,{host:config.HOST,dialect:config.DIALECT});// Create schema
cov_2617da4yij().s[4]++;db.user=require("./models/user.js")(db.sequelize,DataTypes);cov_2617da4yij().s[5]++;db.post=require("./models/post.js")(db.sequelize,DataTypes);cov_2617da4yij().s[6]++;db.comment=require("./models/comment.js")(db.sequelize,DataTypes);// Create Cardinalities among tables
cov_2617da4yij().s[7]++;db.post.belongsTo(db.user,{foreignKey:{name:"username",allowNull:false}});cov_2617da4yij().s[8]++;db.comment.belongsTo(db.user,{foreignKey:{name:"username",allowNull:false}});cov_2617da4yij().s[9]++;db.comment.belongsTo(db.post,{foreignKey:{name:"postByUser",allowNull:false}});cov_2617da4yij().s[10]++;db.sync=async()=>{cov_2617da4yij().f[0]++;cov_2617da4yij().s[11]++;// sync tables
await db.sequelize.sync();// add seed data into tables
cov_2617da4yij().s[12]++;await seedData();};async function seedData(){cov_2617da4yij().f[1]++;// import seed data into tables
const count=(cov_2617da4yij().s[13]++,await db.user.count());cov_2617da4yij().s[14]++;if(count>0){cov_2617da4yij().b[0][0]++;cov_2617da4yij().s[15]++;return;}else{cov_2617da4yij().b[0][1]++;}// if there are some data, don't insert
const argon2=(cov_2617da4yij().s[16]++,require("argon2"));let hashedPassword=(cov_2617da4yij().s[17]++,await argon2.hash("TestPass123123",{type:argon2.argon2id}));cov_2617da4yij().s[18]++;await db.user.create({username:"jacky@gmail.com",hashed_password:hashedPassword,first_name:"Jacky",last_name:"Lai"});cov_2617da4yij().s[19]++;hashedPassword=await argon2.hash("TestPass321321",{type:argon2.argon2id});cov_2617da4yij().s[20]++;await db.user.create({username:"a@a.a",hashed_password:hashedPassword,first_name:"AAA",last_name:"aaa"});};cov_2617da4yij().s[21]++;module.exports=db;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTZXF1ZWxpemUiLCJEYXRhVHlwZXMiLCJyZXF1aXJlIiwiY29uZmlnIiwiZGIiLCJPcCIsInNlcXVlbGl6ZSIsIkRCIiwiVVNFUiIsIlBBU1NXT1JEIiwiaG9zdCIsIkhPU1QiLCJkaWFsZWN0IiwiRElBTEVDVCIsInVzZXIiLCJwb3N0IiwiY29tbWVudCIsImJlbG9uZ3NUbyIsImZvcmVpZ25LZXkiLCJuYW1lIiwiYWxsb3dOdWxsIiwic3luYyIsInNlZWREYXRhIiwiY291bnQiLCJhcmdvbjIiLCJoYXNoZWRQYXNzd29yZCIsImhhc2giLCJ0eXBlIiwiYXJnb24yaWQiLCJjcmVhdGUiLCJ1c2VybmFtZSIsImhhc2hlZF9wYXNzd29yZCIsImZpcnN0X25hbWUiLCJsYXN0X25hbWUiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0c1xuY29uc3QgeyBTZXF1ZWxpemUsIERhdGFUeXBlcyB9ID0gcmVxdWlyZShcInNlcXVlbGl6ZVwiKTtcbmNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoXCIuL2NvbmZpZy5qc1wiKTtcblxuY29uc3QgZGIgPSB7XG4gICAgT3A6IFNlcXVlbGl6ZS5PcFxufTtcblxuLy8gQ3JlYXRlIGEgU2VxdWVsaXplIGluc3RhbmNlXG5kYi5zZXF1ZWxpemUgPSBuZXcgU2VxdWVsaXplKGNvbmZpZy5EQiwgY29uZmlnLlVTRVIsIGNvbmZpZy5QQVNTV09SRCwge1xuICAgIGhvc3Q6IGNvbmZpZy5IT1NULFxuICAgIGRpYWxlY3Q6IGNvbmZpZy5ESUFMRUNUXG59KTtcblxuLy8gQ3JlYXRlIHNjaGVtYVxuZGIudXNlciA9IHJlcXVpcmUoXCIuL21vZGVscy91c2VyLmpzXCIpKGRiLnNlcXVlbGl6ZSwgRGF0YVR5cGVzKTtcbmRiLnBvc3QgPSByZXF1aXJlKFwiLi9tb2RlbHMvcG9zdC5qc1wiKShkYi5zZXF1ZWxpemUsIERhdGFUeXBlcyk7XG5kYi5jb21tZW50ID0gcmVxdWlyZShcIi4vbW9kZWxzL2NvbW1lbnQuanNcIikoZGIuc2VxdWVsaXplLCBEYXRhVHlwZXMpO1xuXG4vLyBDcmVhdGUgQ2FyZGluYWxpdGllcyBhbW9uZyB0YWJsZXNcbmRiLnBvc3QuYmVsb25nc1RvKGRiLnVzZXIsIHsgZm9yZWlnbktleTogeyBuYW1lOiBcInVzZXJuYW1lXCIsIGFsbG93TnVsbDogZmFsc2V9IH0pO1xuZGIuY29tbWVudC5iZWxvbmdzVG8oZGIudXNlciwgeyBmb3JlaWduS2V5OiB7IG5hbWU6IFwidXNlcm5hbWVcIiwgYWxsb3dOdWxsOiBmYWxzZSB9IH0pO1xuZGIuY29tbWVudC5iZWxvbmdzVG8oZGIucG9zdCwgeyBmb3JlaWduS2V5OiB7IG5hbWU6IFwicG9zdEJ5VXNlclwiLCBhbGxvd051bGw6IGZhbHNlIH19KTtcblxuZGIuc3luYyA9IGFzeW5jICgpID0+IHtcbiAgICAvLyBzeW5jIHRhYmxlc1xuICAgIGF3YWl0IGRiLnNlcXVlbGl6ZS5zeW5jKCk7XG4gICAgLy8gYWRkIHNlZWQgZGF0YSBpbnRvIHRhYmxlc1xuICAgIGF3YWl0IHNlZWREYXRhKCk7XG59O1xuXG5hc3luYyBmdW5jdGlvbiBzZWVkRGF0YSgpIHsgICAgIC8vIGltcG9ydCBzZWVkIGRhdGEgaW50byB0YWJsZXNcbiAgICBjb25zdCBjb3VudCA9IGF3YWl0IGRiLnVzZXIuY291bnQoKTtcbiAgICBpZiAoY291bnQgPiAwKSByZXR1cm47ICAgICAgLy8gaWYgdGhlcmUgYXJlIHNvbWUgZGF0YSwgZG9uJ3QgaW5zZXJ0XG5cbiAgICBjb25zdCBhcmdvbjIgPSByZXF1aXJlKFwiYXJnb24yXCIpO1xuXG4gICAgbGV0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYXJnb24yLmhhc2goXCJUZXN0UGFzczEyMzEyM1wiLCB7IHR5cGU6YXJnb24yLmFyZ29uMmlkIH0pO1xuICAgIGF3YWl0IGRiLnVzZXIuY3JlYXRlKHtcbiAgICAgICAgdXNlcm5hbWU6IFwiamFja3lAZ21haWwuY29tXCIsXG4gICAgICAgIGhhc2hlZF9wYXNzd29yZDogaGFzaGVkUGFzc3dvcmQsXG4gICAgICAgIGZpcnN0X25hbWU6IFwiSmFja3lcIixcbiAgICAgICAgbGFzdF9uYW1lOiBcIkxhaVwiXG4gICAgfSlcbiAgICBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGFyZ29uMi5oYXNoKFwiVGVzdFBhc3MzMjEzMjFcIiwgeyB0eXBlOmFyZ29uMi5hcmdvbjJpZCB9KTtcbiAgICBhd2FpdCBkYi51c2VyLmNyZWF0ZSh7XG4gICAgICAgIHVzZXJuYW1lOiBcImFAYS5hXCIsXG4gICAgICAgIGhhc2hlZF9wYXNzd29yZDogaGFzaGVkUGFzc3dvcmQsXG4gICAgICAgIGZpcnN0X25hbWU6IFwiQUFBXCIsXG4gICAgICAgIGxhc3RfbmFtZTogXCJhYWFcIlxuICAgIH0pXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRiOyJdLCJtYXBwaW5ncyI6Ijg3RUFlWTtBQUFBLDJGQWZaO0FBQ0EsS0FBTSxDQUFFQSxTQUFTLENBQUVDLFNBQVUsQ0FBQywwQkFBR0MsT0FBTyxDQUFDLFdBQVcsQ0FBQyxFQUNyRCxLQUFNQyxPQUFNLDBCQUFHRCxPQUFPLENBQUMsYUFBYSxDQUFDLEVBRXJDLEtBQU1FLEdBQUUsMEJBQUcsQ0FDUEMsRUFBRSxDQUFFTCxTQUFTLENBQUNLLEVBQ2xCLENBQUMsRUFFRDtBQUFBLHdCQUNBRCxFQUFFLENBQUNFLFNBQVMsQ0FBRyxHQUFJTixVQUFTLENBQUNHLE1BQU0sQ0FBQ0ksRUFBRSxDQUFFSixNQUFNLENBQUNLLElBQUksQ0FBRUwsTUFBTSxDQUFDTSxRQUFRLENBQUUsQ0FDbEVDLElBQUksQ0FBRVAsTUFBTSxDQUFDUSxJQUFJLENBQ2pCQyxPQUFPLENBQUVULE1BQU0sQ0FBQ1UsT0FDcEIsQ0FBQyxDQUFDLENBRUY7QUFBQSx3QkFDQVQsRUFBRSxDQUFDVSxJQUFJLENBQUdaLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDRSxFQUFFLENBQUNFLFNBQVMsQ0FBRUwsU0FBUyxDQUFDLENBQUMsd0JBQy9ERyxFQUFFLENBQUNXLElBQUksQ0FBR2IsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUNFLEVBQUUsQ0FBQ0UsU0FBUyxDQUFFTCxTQUFTLENBQUMsQ0FBQyx3QkFDL0RHLEVBQUUsQ0FBQ1ksT0FBTyxDQUFHZCxPQUFPLENBQUMscUJBQXFCLENBQUMsQ0FBQ0UsRUFBRSxDQUFDRSxTQUFTLENBQUVMLFNBQVMsQ0FBQyxDQUVwRTtBQUFBLHdCQUNBRyxFQUFFLENBQUNXLElBQUksQ0FBQ0UsU0FBUyxDQUFDYixFQUFFLENBQUNVLElBQUksQ0FBRSxDQUFFSSxVQUFVLENBQUUsQ0FBRUMsSUFBSSxDQUFFLFVBQVUsQ0FBRUMsU0FBUyxDQUFFLEtBQUssQ0FBRSxDQUFDLENBQUMsQ0FBQyx3QkFDbEZoQixFQUFFLENBQUNZLE9BQU8sQ0FBQ0MsU0FBUyxDQUFDYixFQUFFLENBQUNVLElBQUksQ0FBRSxDQUFFSSxVQUFVLENBQUUsQ0FBRUMsSUFBSSxDQUFFLFVBQVUsQ0FBRUMsU0FBUyxDQUFFLEtBQU0sQ0FBRSxDQUFDLENBQUMsQ0FBQyx3QkFDdEZoQixFQUFFLENBQUNZLE9BQU8sQ0FBQ0MsU0FBUyxDQUFDYixFQUFFLENBQUNXLElBQUksQ0FBRSxDQUFFRyxVQUFVLENBQUUsQ0FBRUMsSUFBSSxDQUFFLFlBQVksQ0FBRUMsU0FBUyxDQUFFLEtBQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyx5QkFFdkZoQixFQUFFLENBQUNpQixJQUFJLENBQUcsU0FBWSxrREFDbEI7QUFDQSxLQUFNakIsR0FBRSxDQUFDRSxTQUFTLENBQUNlLElBQUksRUFBRSxDQUN6QjtBQUFBLHlCQUNBLEtBQU1DLFNBQVEsRUFBRSxDQUNwQixDQUFDLENBRUQsY0FBZUEsU0FBUSxFQUFHLHlCQUFNO0FBQzVCLEtBQU1DLE1BQUssMkJBQUcsS0FBTW5CLEdBQUUsQ0FBQ1UsSUFBSSxDQUFDUyxLQUFLLEVBQUUsRUFBQyx5QkFDcEMsR0FBSUEsS0FBSyxDQUFHLENBQUMsQ0FBRSw0REFBTSxDQUFDLGlDQUFNO0FBRTVCLEtBQU1DLE9BQU0sMkJBQUd0QixPQUFPLENBQUMsUUFBUSxDQUFDLEVBRWhDLEdBQUl1QixlQUFjLDJCQUFHLEtBQU1ELE9BQU0sQ0FBQ0UsSUFBSSxDQUFDLGdCQUFnQixDQUFFLENBQUVDLElBQUksQ0FBQ0gsTUFBTSxDQUFDSSxRQUFTLENBQUMsQ0FBQyxFQUFDLHlCQUNuRixLQUFNeEIsR0FBRSxDQUFDVSxJQUFJLENBQUNlLE1BQU0sQ0FBQyxDQUNqQkMsUUFBUSxDQUFFLGlCQUFpQixDQUMzQkMsZUFBZSxDQUFFTixjQUFjLENBQy9CTyxVQUFVLENBQUUsT0FBTyxDQUNuQkMsU0FBUyxDQUFFLEtBQ2YsQ0FBQyxDQUFDLDBCQUNGUixjQUFjLENBQUcsS0FBTUQsT0FBTSxDQUFDRSxJQUFJLENBQUMsZ0JBQWdCLENBQUUsQ0FBRUMsSUFBSSxDQUFDSCxNQUFNLENBQUNJLFFBQVMsQ0FBQyxDQUFDLENBQUMseUJBQy9FLEtBQU14QixHQUFFLENBQUNVLElBQUksQ0FBQ2UsTUFBTSxDQUFDLENBQ2pCQyxRQUFRLENBQUUsT0FBTyxDQUNqQkMsZUFBZSxDQUFFTixjQUFjLENBQy9CTyxVQUFVLENBQUUsS0FBSyxDQUNqQkMsU0FBUyxDQUFFLEtBQ2YsQ0FBQyxDQUFDLENBQ04sQ0FBQyxDQUFDLHlCQUVGQyxNQUFNLENBQUNDLE9BQU8sQ0FBRy9CLEVBQUUifQ==